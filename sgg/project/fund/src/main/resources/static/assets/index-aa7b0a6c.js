var l=(o,u,s)=>new Promise((d,t)=>{var p=e=>{try{a(s.next(e))}catch(r){t(r)}},n=e=>{try{a(s.throw(e))}catch(r){t(r)}},a=e=>e.done?d(e.value):Promise.resolve(e.value).then(p,n);a((s=s.apply(o,u)).next())});import{a1 as k,k as C,O as B,aN as F,aM as A,_ as P}from"./index-04297947.js";import{P as b}from"./index-c906e97a.js";import D from"./CurrentPermissionMode-038b4955.js";import{d as M,e as g,a7 as i,_ as v,a8 as S,a9 as m,f as c,a0 as T,E as _}from"./vue-854c8149.js";import{aa as $,ad as w}from"./antd-cc917134.js";import"./useContentViewHeight-0f0b516d.js";import"./useWindowSizeFn-68619b88.js";const y=M({components:{Space:$,Alert:w,CurrentPermissionMode:D,PageWrapper:b},setup(){const{refreshMenu:o}=k(),u=C(),s=B(),d=g(()=>s.getProjectConfig.permissionMode===F.BACK);function t(p){return l(this,null,function*(){const n="fakeToken"+p;u.setToken(n),u.getUserInfoAction(),o()})}return{RoleEnum:A,refreshMenu:o,switchToken:t,isBackPermissionMode:d}}});const h={class:"mt-4"};function x(o,u,s,d,t,p){const n=i("CurrentPermissionMode"),a=i("Alert"),e=i("a-button"),r=i("Space"),f=i("PageWrapper");return v(),S(f,{title:"后台权限示例",contentBackground:"",contentClass:"p-4",content:"目前mock了两组数据， id为1 和 2 具体返回的菜单可以在mock/sys/menu.ts内查看"},{default:m(()=>[c(n),c(a,{class:"mt-4",type:"info",message:"点击后请查看左侧菜单变化","show-icon":""}),T("div",h,[_(" 权限切换(请先切换权限模式为后台权限模式): "),c(r,null,{default:m(()=>[c(e,{onClick:u[0]||(u[0]=E=>o.switchToken(1)),disabled:!o.isBackPermissionMode},{default:m(()=>[_(" 获取用户id为1的菜单 ")]),_:1},8,["disabled"]),c(e,{onClick:u[1]||(u[1]=E=>o.switchToken(2)),disabled:!o.isBackPermissionMode},{default:m(()=>[_(" 获取用户id为2的菜单 ")]),_:1},8,["disabled"])]),_:1})])]),_:1})}const R=P(y,[["render",x],["__scopeId","data-v-e2f0b5bb"]]);export{R as default};
