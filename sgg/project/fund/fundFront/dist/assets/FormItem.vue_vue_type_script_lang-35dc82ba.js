var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(e,n,m)=>n in e?Z(e,n,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[n]=m,f=(e,n)=>{for(var m in n||(n={}))ne.call(n,m)&&H(e,m,n[m]);if(E)for(var m of E(n))se.call(n,m)&&H(e,m,n[m]);return e},$=(e,n)=>ee(e,te(n));import{e as O,u as i,d as oe,H as re,t as ae,f as g,i as le,A as ce,ac as J,E as ie}from"./vue-854c8149.js";import{c as G}from"./componentMap-b98f195e.js";import{a as ue}from"./index-817ed082.js";import{j as Y,r as Q,l as y,W as N,v as U,a4 as de,a5 as fe}from"./index-f276d676.js";import{a7 as z,ag as me,ae as he,D as pe}from"./antd-cc917134.js";const{t:_}=Y();function K(e){return e.includes("Input")||e.includes("Complete")?_("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?_("common.chooseText"):""}const be=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function ge(){return[...be,"RangePicker"]}function Pe(e,n,m){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(n)?e.type=m?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(n)?e.type="array":["InputNumber"].includes(n)&&(e.type="number")}function Te(e,n){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&n&&Q(n)?`${n}`:n}const Re=ge(),Me=["Input","InputPassword","InputSearch","InputTextArea"],Ce=["Upload","ApiTransfer","ApiTree","ApiSelect","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup"];function ye(e,n){return O(()=>{const m=i(e),{labelCol:S={},wrapperCol:R={}}=m.itemProps||{},{labelWidth:M,disabledLabelWidth:h}=m,{labelWidth:x,labelCol:j,wrapperCol:D,layout:v}=i(n);if(!x&&!M&&!j||h)return S.style={textAlign:"left"},{labelCol:S,wrapperCol:R};let C=M||x;const L=f(f({},j),S),F=f(f({},D),R);return C&&(C=Q(C)?`${C}px`:C),{labelCol:f({style:{width:C}},L),wrapperCol:f({style:{width:v==="vertical"?"100%":`calc(100% - ${C})`}},F)}})}function B(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!le(e)}const je=oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:n}){const{t:m}=Y(),{schema:S,formProps:R}=re(e),M=ye(S,R),h=O(()=>{const{allDefaultValues:s,formModel:t,schema:a}=e,{mergeDynamicData:l}=e.formProps;return{field:a.field,model:t,values:f(f(f({},l),s),t),schema:a}}),x=O(()=>{var r;const{schema:s,tableAction:t,formModel:a,formActionType:l}=e;let{componentProps:o={}}=s;return y(o)&&(o=(r=o({schema:s,tableAction:t,formModel:a,formActionType:l}))!=null?r:{}),s.component==="Divider"&&(o=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},o)),o}),j=O(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:a=!1}=i(x);let l=!!s||a;return N(t)&&(l=t),y(t)&&(l=t(i(h))),l});function D(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:a}=e.formProps,l=a&&N(e.isAdvanced)?e.isAdvanced:!0;let o=!0,r=!0;return N(s)&&(o=s),N(t)&&(r=t),y(s)&&(o=s(i(h))),y(t)&&(r=t(i(h))),o=o&&l,{isShow:o,isIfShow:r}}function v(){var T;const{rules:s=[],component:t,rulesMessageJoinLabel:a,label:l,dynamicRules:o,required:r}=e.schema;if(y(o))return o(i(h));let c=pe(s);const{rulesMessageJoinLabel:k}=e.formProps,A=Reflect.has(e.schema,"rulesMessageJoinLabel")?a:k,p=K(t)+`${A?l:""}`;function I(d,u){const P=d.message||p;return u===void 0||de(u)||Array.isArray(u)&&u.length===0||typeof u=="string"&&u.trim()===""||typeof u=="object"&&Reflect.has(u,"checked")&&Reflect.has(u,"halfChecked")&&Array.isArray(u.checked)&&Array.isArray(u.halfChecked)&&u.checked.length===0&&u.halfChecked.length===0?Promise.reject(P):Promise.resolve()}const b=y(r)?r(i(h)):r;b&&(!c||c.length===0?c=[{required:b,validator:I}]:c.findIndex(u=>Reflect.has(u,"required"))===-1&&c.push({required:b,validator:I}));const q=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(q!==-1){const d=c[q],{isShow:u}=D();if(u||(d.required=!1),t){Reflect.has(d,"type")||(d.type=t==="InputNumber"?"number":"string"),d.message=d.message||p,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const P=(T=i(x))==null?void 0:T.valueFormat;Pe(d,t,P)}}const w=c.findIndex(d=>d.max);return w!==-1&&!c[w].validator&&(c[w].message=c[w].message||m("component.form.maxTip",[c[w].max])),c}function C(){var u;const{renderComponentContent:s,component:t,field:a,changeEvent:l="change",valueField:o}=e.schema,r=t&&["Switch","Checkbox"].includes(t),c=`on${fe(l)}`,k={[c]:(...P)=>{const[V]=P;b[c]&&b[c](...P);const W=V?V.target:null,X=W?r?W.checked:W.value:V;e.setFormModel(a,X,e.schema)}},A=G.get(t),{autoSetPlaceHolder:p,size:I}=e.formProps,b=$(f({allowClear:!0,getPopupContainer:P=>P.parentNode,size:I},i(x)),{disabled:i(j)});!b.disabled&&p&&t!=="RangePicker"&&t&&(b.placeholder=((u=i(x))==null?void 0:u.placeholder)||K(t)),b.codeField=a,b.formValues=i(h);const w={[o||(r?"checked":"value")]:e.formModel[a]},T=f(f(f({},b),k),w);if(!s)return g(A,T,null);const d=y(s)?f({},s(i(h))):{default:()=>s};return g(A,T,B(d)?d:{default:()=>[d]})}function L(){const{label:s,helpMessage:t,helpComponentProps:a,subLabel:l}=e.schema,o=l?g("span",null,[s,ie(" "),g("span",{class:"text-secondary"},[l])]):s,r=y(t)?t(i(h)):t;return!r||Array.isArray(r)&&r.length===0?o:g("span",null,[o,g(ue,J({placement:"top",class:"mx-1",text:r},a),null)])}function F(){const{itemProps:s,slot:t,render:a,field:l,suffix:o,component:r}=e.schema,{labelCol:c,wrapperCol:k}=i(M),{colon:A}=e.formProps;if(r==="Divider"){let p;return g(z,{span:24},{default:()=>[g(me,i(x),B(p=L())?p:{default:()=>[p]})]})}else{const p=()=>t?U(n,t,i(h)):a?a(i(h)):C(),I=!!o,b=y(o)?o(i(h)):o;return Ce.includes(r)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(he.Item,J({name:l,colon:A,class:{"suffix-item":I}},s,{label:L(),rules:v(),labelCol:c,wrapperCol:k}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[p()]),I&&g("span",{class:"suffix"},[b])])]})}}return()=>{let s;const{colProps:t={},colSlot:a,renderColContent:l,component:o}=e.schema;if(!G.has(o))return null;const{baseColProps:r={}}=e.formProps,c=f(f({},r),t),{isIfShow:k,isShow:A}=D(),p=i(h);return k&&ae(g(z,c,B(s=(()=>a?U(n,a,p):l?l(p):F())())?s:{default:()=>[s]}),[[ce,A]])}}});export{je as _,Re as a,Me as d,Te as h};
