var v=Object.defineProperty;var g=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(e,a,t)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,b=(e,a)=>{for(var t in a||(a={}))k.call(a,t)&&w(e,t,a[t]);if(g)for(var t of g(a))I.call(a,t)&&w(e,t,a[t]);return e};var d=(e,a,t)=>new Promise((n,l)=>{var c=s=>{try{r(t.next(s))}catch(o){l(o)}},i=s=>{try{r(t.throw(s))}catch(o){l(o)}},r=s=>s.done?n(s.value):Promise.resolve(s.value).then(c,i);r((t=t.apply(e,a)).next())});import{B as R}from"./BasicForm-b6780bdd.js";import"./componentMap-dbede571.js";import{u as F}from"./useForm-85c9cd40.js";import"./RadioButtonGroup-52759c34.js";import{s as C,d as y}from"./system-09ba9481.js";import{b as P,_ as T}from"./index-26e65586.js";import{n as N,d as $,k as _,e as x,u as f,a7 as h,_ as V,a8 as L,a9 as D,f as B,ac as M}from"./vue-854c8149.js";import{aG as O}from"./antd-cc917134.js";import{B as U,a as G}from"./index-7de2ddfe.js";import{_ as j}from"./index-5c626778.js";const se=[{title:"角色名称",dataIndex:"roleName",width:200},{title:"角色值",dataIndex:"roleValue",width:180},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:120,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),N(O,{checked:e.status==="1",checkedChildren:"已启用",unCheckedChildren:"已禁用",loading:e.pendingStatus,onChange(a){e.pendingStatus=!0;const t=a?"1":"0",{createMessage:n}=P();C(e.id,t).then(()=>{e.status=t,n.success("已成功修改角色状态")}).catch(()=>{n.error("修改角色状态失败")}).finally(()=>{e.pendingStatus=!1})}}))},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],oe=[{field:"roleNme",label:"角色名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],q=[{field:"roleName",label:"角色名称",required:!0,component:"Input"},{field:"roleValue",label:"角色值",required:!0,component:"Input"},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]}},{label:"备注",field:"remark",component:"InputTextArea"},{label:" ",field:"menu",slot:"menu",component:"Input"}],A=$({name:"RoleDrawer",components:{BasicDrawer:U,BasicForm:R,BasicTree:j},emits:["success","register"],setup(e,{emit:a}){const t=_(!0),n=_([]),[l,{resetFields:c,setFieldsValue:i,validate:r}]=F({labelWidth:90,baseColProps:{span:24},schemas:q,showActionButtonGroup:!1}),[s,{setDrawerProps:o,closeDrawer:m}]=G(u=>d(this,null,function*(){c(),o({confirmLoading:!1}),f(n).length===0&&(n.value=yield y()),t.value=!!(u!=null&&u.isUpdate),f(t)&&i(b({},u.record))})),p=x(()=>f(t)?"编辑角色":"新增角色");function S(){return d(this,null,function*(){try{const u=yield r();o({confirmLoading:!0}),m(),a("success")}finally{o({confirmLoading:!1})}})}return{registerDrawer:s,registerForm:l,getTitle:p,handleSubmit:S,treeData:n}}});function z(e,a,t,n,l,c){const i=h("BasicTree"),r=h("BasicForm"),s=h("BasicDrawer");return V(),L(s,M(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:D(()=>[B(r,{onRegister:e.registerForm},{menu:D(({model:o,field:m})=>[B(i,{value:o[m],"onUpdate:value":p=>o[m]=p,treeData:e.treeData,fieldNames:{title:"menuName",key:"id"},checkable:"",toolbar:"",title:"菜单分配"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}const W=T(A,[["render",z]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as R,ne as a,se as c,oe as s};
