/**
 * mpxjs webview bridge v2.7.22
 * (c) 2022 @mpxjs team
 * @license Apache
 */
/**
 * mpxjs webview bridge v2.7.22
 * (c) 2022 @mpxjs team
 * @license Apache
 */
const e={wx:{url:"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"},qq:{url:"https://qqq.gtimg.cn/miniprogram/webview_jssdk/qqjssdk-1.0.0.js"},ali:{url:"https://appx/web-view.min.js"},baidu:{url:"https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.4.js"},tt:{url:"https://s3.pstatp.com/toutiao/tmajssdk/jssdk.js"},...window.sdkUrlMap},a={wx:["wx","miniProgram"],qq:["qq","miniProgram"],ali:["my"],baidu:["swan","webView"],tt:["tt","miniProgram"]};let o,t=null;window.addEventListener("message",e=>{o=e.data===e.origin,o&&(t="web",window.parent.postMessage({type:"load",detail:{load:!0}},"*"))},!1);let r=navigator.userAgent;function i(e,a){let t;switch(e){case"postMessage":t="message";break;case"navigateBack":t="navigateBack";break;case"navigateTo":t="navigateTo";break;case"redirectTo":t="redirectTo";break;case"switchTab":t="switchTab";break;case"reLaunch":t="reLaunch";break;case"getEnv":t="getEnv"}"getEnv"!==e&&o?window.parent.postMessage({type:t,detail:{data:a}},"*"):a({miniprogram:!1})}r.indexOf("AlipayClient")>-1?t="ali":r.toLowerCase().indexOf("miniprogram")>-1?t=r.indexOf("QQ")>-1?"qq":"wx":r.indexOf("swan")>-1?t="baidu":r.indexOf("toutiao")>-1?t="tt":window.parent.postMessage({type:"load",detail:{load:!0}},"*");const n={};const s=e=>{const o={navigateTo:"navigateTo",navigateBack:"navigateBack",switchTab:"switchTab",reLaunch:"reLaunch",redirectTo:"redirectTo",getEnv:"getEnv",postMessage:"postMessage",getLoadError:"getLoadError",onMessage:{ali:!0}};for(let r in o){const s="string"==typeof o[r]?o[r]:!!o[r][t]&&("string"==typeof o[r][t]?o[r][t]:r);n[r]=(...o)=>"web"===t?i(r,...o):e.then(()=>{if("getLoadError"===s)return Promise.resolve("js\u52a0\u8f7d\u5b8c\u6210");a[t].reduce((e,a)=>e[a],window)[s](...o)})}};(()=>{if(null===t)return console.log("mpxjs/webview: \u672a\u8bc6\u522b\u7684\u73af\u5883\uff0c\u5f53\u524d\u4ec5\u652f\u6301 \u5fae\u4fe1\u3001\u652f\u4ed8\u5b9d\u3001\u767e\u5ea6\u3001\u5934\u6761 QQ \u5c0f\u7a0b\u5e8f"),void s();const a=window[t]?Promise.resolve():e[t].url?function(e,{time:a=5e3,crossOrigin:o=!1}={}){return Promise.race([new Promise((a,t)=>{let r=document.createElement("script");r.type="text/javascript",r.async="async",o&&(r.crossOrigin="anonymous"),r.onload=r.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(a(),r.onload=r.onreadystatechange=null)},r.onerror=function(){t(new Error(`load ${e} error`)),r.onerror=null},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}),new Promise((o,t)=>{setTimeout(()=>{t(new Error(`load ${e} timeout`))},a)})])}(e[t].url,{crossOrigin:!!e[t].crossOrigin}):Promise.reject(new Error("\u672a\u627e\u5230\u5bf9\u5e94\u7684sdk"));s(a)})();const c={...n,getAdvancedApi:(e,o)=>{if(!o)return void console.log("\u9700\u8981\u63d0\u4f9b\u6302\u8f7d\u65b9\u6cd5\u7684mpx\u5bf9\u8c61");if(window.wx){if(e)return void console.log("\b\u5fae\u4fe1\u73af\u5883\u4e0b\u9700\u8981\u914d\u7f6ewx.config\u624d\u80fd\u6302\u8f7d\u65b9\u6cd5");window.wx.config(e)}const r={checkJSApi:{wx:"checkJSApi"},chooseImage:{wx:"chooseImage",baidu:"chooseImage",ali:"chooseImage"},previewImage:{wx:"previewImage",baidu:"previewImage",ali:"previewImage"},uploadImage:{wx:"uploadImage"},downloadImage:{wx:"downloadImage"},getLocalImgData:{wx:"getLocalImgData"},startRecord:{wx:"startRecord"},stopRecord:{wx:"stopRecord"},onVoiceRecordEnd:{wx:"onVoiceRecordEnd"},playVoice:{wx:"playVoice"},pauseVoice:{wx:"pauseVoice"},stopVoice:{wx:"stopVoice"},onVoicePlayEnd:{wx:"onVoicePlayEnd"},uploadVoice:{wx:"uploadVoice"},downloadVoice:{wx:"downloadVoice"},translateVoice:{wx:"translateVoice"},getNetworkType:{wx:"getNetworkType",baidu:"getNetworkType",ali:"getNetworkType"},openLocation:{wx:"openLocation",baidu:"openLocation",ali:"openLocation"},getLocation:{wx:"getLocation",baidu:"getLocation",ali:"getLocation"},startSearchBeacons:{wx:"startSearchBeacons"},stopSearchBeacons:{wx:"stopSearchBeacons"},onSearchBeacons:{wx:"onSearchBeacons"},scanQRCode:{wx:"scanQRCode"},chooseCard:{wx:"chooseCard"},addCard:{wx:"addCard"},openCard:{wx:"openCard"},alert:{ali:"alert"},showLoading:{ali:"showLoading"},hideLoading:{ali:"hideLoading"},setStorage:{ali:"setStorage"},getStorage:{ali:"getStorage"},removeStorage:{ali:"removeStorage"},clearStorage:{ali:"clearStorage"},getStorageInfo:{ali:"getStorageInfo"},startShare:{ali:"startShare"},tradePay:{ali:"tradePay"},onMessage:{ali:"onMessage"}};for(let e in r)o[e]=(...o)=>{r[e][t]?(console.log(r[e][t],"ApiList[item][env]"),window[a[t][0]][r[e][t]](...o)):console.error(`\u6b64\u73af\u5883\u4e0d\u652f\u6301${e}\u65b9\u6cd5`)}},mpxEnv:t},{navigateTo:d,navigateBack:g,switchTab:w,reLaunch:l,redirectTo:p,getEnv:m,postMessage:u,getLoadError:x}=n,{getAdvancedApi:h}=c;export default c;export{h as getAdvancedApi,m as getEnv,x as getLoadError,g as navigateBack,d as navigateTo,u as postMessage,l as reLaunch,p as redirectTo,w as switchTab};